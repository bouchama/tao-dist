{"version":3,"sources":["routes.js","DeliveryTool/launchQueue.js"],"names":["define","DeliveryTool","actions","launchQueue","_","$","_defaultParams","relaunchInterval","relaunchIntervalDeviation","start","interval","deviation","loaderScript","params","data","defaults","parseInt","Math","random","runUrl","setTimeout","window","location"],"mappings":"AAAAA,OAAA,yCACAC,cACAC,SACAC,YAAA,0CCgBAH,OAAA,2DACA,SACA,UACA,SAAAI,EAAAC,GACA,YAEA,IAAAC,iBACAC,iBAAA,GACAC,0BAAA,EAMA,QACAC,MAAA,WACA,GAEAC,UACAC,UAHAC,aAAAP,EAAA,eACAQ,OAAAD,aAAAE,KAAA,SAIAD,QAAAT,EAAAW,SAAAF,OAAAP,gBAEAI,SAAAG,OAAAN,iBACAI,UAAAK,SAAAH,OAAAL,2BAAAS,KAAAC,SAAAF,SAAAH,OAAAL,2BAAA,EACAE,SAAA,KAAAA,SAAAC,WAEAE,OAAAM,QACAC,WAAA;AACAC,OAAAC,SAAAT,OAAAM,QACAT","file":"routes.js","sourcesContent":["define('ltiDeliveryProvider/controller/routes',{\n    'DeliveryTool' : {\n        'actions' : {\n            'launchQueue' : 'controller/DeliveryTool/launchQueue'\n        }\n    }\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2017 (original work) Open Assessment Technologies SA;\n *\n */\n\ndefine('ltiDeliveryProvider/controller/DeliveryTool/launchQueue',[\n    'lodash',\n    'jquery'\n], function (_, $) {\n    'use strict';\n\n    var _defaultParams = {\n        \"relaunchInterval\" : 30,\n        \"relaunchIntervalDeviation\" : 5\n    };\n\n    /**\n     * @exports\n     */\n    return {\n        start: function() {\n            var loaderScript = $('#amd-loader');\n            var params = loaderScript.data('params');\n            var interval;\n            var deviation;\n\n            params = _.defaults(params, _defaultParams);\n\n            interval = params.relaunchInterval;\n            deviation = parseInt(params.relaunchIntervalDeviation) - (Math.random() * parseInt(params.relaunchIntervalDeviation) * 2);\n            interval = (interval + deviation) * 1000;\n\n            if (params.runUrl) {\n                setTimeout(function () {\n                    window.location = params.runUrl;\n                }, interval);\n            }\n        }\n    };\n});\n\n"]}